<!DOCTYPE html>
 
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<html>
    <head>
    

<script>

/*ControllerUtil.redirectPost alert*/
if("" != ""){
    var msg = "".replace("<br>", "\n");
	alert(msg);
    
}
</script>


	<!-- SET FILE PATH :: compatibility ie9 code -->
        <base href="../" />
        <!--[if IE]><script type="text/javascript">
            // Fix for IE ignoring relative base tags.
            (function() {
                var baseTag = document.getElementsByTagName('base')[0];
                baseTag.href = baseTag.href;
            })();
        </script><![endif]-->
        <meta charset="UTF-8">
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
          
        	
        	
        		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
        	
        
        <meta name="format-detection" content="telephone=no">
	     <meta http-equiv="X-UA-Compatible" content="IE=edge">
         <!-- TITLE -->
         <title>EuDi</title>
	     <link rel="icon" type="image/gif" href="http://www.lgchem.com/images/kr/common/logo.ico" />
	     

    


<!-- common css file-->
<link rel="stylesheet" href="/resource/assets/web/css/main.css?version=1.3">
<link rel="stylesheet" href="/resource/assets/web/css/mediaQuery.css?version=1.3">


<!-- nurse css file -->
<link rel="stylesheet" href="/resource/assets/web/nurse/css/common.css?version=2.1">
<link rel="stylesheet" href="/resource/assets/web/nurse/css/sub.css?version=2.1">
<link rel="stylesheet" href="/resource/assets/web/nurse/css/font.css?version=1.2">
<link rel="stylesheet" href="/resource/assets/web/nurse/css/counseling.css">

<!-- nurse js file-->
<!-- <script type="text/javascript" src="/resource/assets/web/nurse/js/lib/jquery-1.11.3.min.js?version=1.2"></script>
<script type="text/javascript" src="/resource/assets/web/nurse/js/lib/jquery-ui-1.11.3.min.js?version=1.2"></script>
<script type="text/javascript" src="/resource/assets/web/nurse/js/lib/jquery.easing.1.3.js?version=1.2"></script> -->

<!-- 임시 제이쿼리 -->
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.3.0.min.js"></script>
<!-- 임시 제이쿼리 -->
<script type="text/javascript" src="/resource/assets/web/nurse/js/common.js?version=1.2"></script>
<script src="/resource/assets/web/nurse/js/counseling.js"></script> 


<!-- common js file-->
<script type="text/javascript" src="/resource/assets/common/js/common.js?version=1.3"></script>
<script type="text/javascript" src="/resource/assets/common/js/jquery.cookie.js?version=1.2"></script>


<script type="text/javascript">


    function SHA256(s){
      
        var chrsz   = 8;
        var hexcase = 0;
      
        function safe_add (x, y) {
            var lsw = (x & 0xFFFF) + (y & 0xFFFF);
            var msw = (x >> 16) + (y >> 16) + (lsw >> 16);
            return (msw << 16) | (lsw & 0xFFFF);
        }
      
        function S (X, n) { return ( X >>> n ) | (X << (32 - n)); }
        function R (X, n) { return ( X >>> n ); }
        function Ch(x, y, z) { return ((x & y) ^ ((~x) & z)); }
        function Maj(x, y, z) { return ((x & y) ^ (x & z) ^ (y & z)); }
        function Sigma0256(x) { return (S(x, 2) ^ S(x, 13) ^ S(x, 22)); }
        function Sigma1256(x) { return (S(x, 6) ^ S(x, 11) ^ S(x, 25)); }
        function Gamma0256(x) { return (S(x, 7) ^ S(x, 18) ^ R(x, 3)); }
        function Gamma1256(x) { return (S(x, 17) ^ S(x, 19) ^ R(x, 10)); }
      
        function core_sha256 (m, l) {
             
            var K = new Array(0x428A2F98, 0x71374491, 0xB5C0FBCF, 0xE9B5DBA5, 0x3956C25B, 0x59F111F1,
                0x923F82A4, 0xAB1C5ED5, 0xD807AA98, 0x12835B01, 0x243185BE, 0x550C7DC3,
                0x72BE5D74, 0x80DEB1FE, 0x9BDC06A7, 0xC19BF174, 0xE49B69C1, 0xEFBE4786,
                0xFC19DC6, 0x240CA1CC, 0x2DE92C6F, 0x4A7484AA, 0x5CB0A9DC, 0x76F988DA,
                0x983E5152, 0xA831C66D, 0xB00327C8, 0xBF597FC7, 0xC6E00BF3, 0xD5A79147,
                0x6CA6351, 0x14292967, 0x27B70A85, 0x2E1B2138, 0x4D2C6DFC, 0x53380D13,
                0x650A7354, 0x766A0ABB, 0x81C2C92E, 0x92722C85, 0xA2BFE8A1, 0xA81A664B,
                0xC24B8B70, 0xC76C51A3, 0xD192E819, 0xD6990624, 0xF40E3585, 0x106AA070,
                0x19A4C116, 0x1E376C08, 0x2748774C, 0x34B0BCB5, 0x391C0CB3, 0x4ED8AA4A,
                0x5B9CCA4F, 0x682E6FF3, 0x748F82EE, 0x78A5636F, 0x84C87814, 0x8CC70208,
                0x90BEFFFA, 0xA4506CEB, 0xBEF9A3F7, 0xC67178F2);
 
            var HASH = new Array(0x6A09E667, 0xBB67AE85, 0x3C6EF372, 0xA54FF53A, 0x510E527F, 
                       0x9B05688C, 0x1F83D9AB, 0x5BE0CD19);
 
            var W = new Array(64);
            var a, b, c, d, e, f, g, h, i, j;
            var T1, T2;
      
            m[l >> 5] |= 0x80 << (24 - l % 32);
            m[((l + 64 >> 9) << 4) + 15] = l;
      
            for ( var i = 0; i<m.length; i+=16 ) {
                a = HASH[0];
                b = HASH[1];
                c = HASH[2];
                d = HASH[3];
                e = HASH[4];
                f = HASH[5];
                g = HASH[6];
                h = HASH[7];
      
                for ( var j = 0; j<64; j++) {
                    if (j < 16) W[j] = m[j + i];
                    else W[j] = safe_add(safe_add(safe_add(Gamma1256(W[j - 2]), W[j - 7]), Gamma0256(W[j - 15])), W[j - 16]);
      
                    T1 = safe_add(safe_add(safe_add(safe_add(h, Sigma1256(e)), Ch(e, f, g)), K[j]), W[j]);
                    T2 = safe_add(Sigma0256(a), Maj(a, b, c));
      
                    h = g;
                    g = f;
                    f = e;
                    e = safe_add(d, T1);
                    d = c;
                    c = b;
                    b = a;
                    a = safe_add(T1, T2);
                }
      
                HASH[0] = safe_add(a, HASH[0]);
                HASH[1] = safe_add(b, HASH[1]);
                HASH[2] = safe_add(c, HASH[2]);
                HASH[3] = safe_add(d, HASH[3]);
                HASH[4] = safe_add(e, HASH[4]);
                HASH[5] = safe_add(f, HASH[5]);
                HASH[6] = safe_add(g, HASH[6]);
                HASH[7] = safe_add(h, HASH[7]);
            }
            return HASH;
        }
      
        function str2binb (str) {
            var bin = Array();
            var mask = (1 << chrsz) - 1;
            for(var i = 0; i < str.length * chrsz; i += chrsz) {
                bin[i>>5] |= (str.charCodeAt(i / chrsz) & mask) << (24 - i%32);
            }
            return bin;
        }
      
        function Utf8Encode(string) {
            string = string.replace(/\r\n/g,"\n");
            var utftext = "";
      
            for (var n = 0; n < string.length; n++) {
      
                var c = string.charCodeAt(n);
      
                if (c < 128) {
                    utftext += String.fromCharCode(c);
                }
                else if((c > 127) && (c < 2048)) {
                    utftext += String.fromCharCode((c >> 6) | 192);
                    utftext += String.fromCharCode((c & 63) | 128);
                }
                else {
                    utftext += String.fromCharCode((c >> 12) | 224);
                    utftext += String.fromCharCode(((c >> 6) & 63) | 128);
                    utftext += String.fromCharCode((c & 63) | 128);
                }
      
            }
      
            return utftext;
        }
      
        function binb2hex (binarray) {
            var hex_tab = hexcase ? "0123456789ABCDEF" : "0123456789abcdef";
            var str = "";
            for(var i = 0; i < binarray.length * 4; i++) {
                str += hex_tab.charAt((binarray[i>>2] >> ((3 - i%4)*8+4)) & 0xF) +
                hex_tab.charAt((binarray[i>>2] >> ((3 - i%4)*8  )) & 0xF);
            }
            return str;
        }
      
        s = Utf8Encode(s);
        return binb2hex(core_sha256(str2binb(s), s.length * chrsz));
      
    }
     
	/*
	 * App & ì¤ë§í¸ì¼ì´ì¤ ê´ë ¨.. 
	 * */
	// íì¬ í¸ì¶í ëë°ì´ì¤ê° ì´ë¤ ê²ì¸ì§ ì²´í¬í©ëë¤.
	var isMobile = {
		Android: function () {
			return navigator.userAgent.match(/Android/i) == null ? false : true;
		},
		iOS: function () {
			return navigator.userAgent.match(/iPhone|iPad|iPod/i) == null ? false : true;
		},
		any: function () {
			return (isMobile.Android() || isMobile.iOS());
		}
	};
	
	//Appì ë¡ê·¸ì¸ì ë³´ ì ë¬
	function fnAppLoginChk() {
		$.ajax({
			type: "POST",
			url: "/smart/getLoginInfo.do",
			//data:JSON.stringify(data),
			contentType: "application/x-www-form-urlencoded; charset=UTF-8",
			dataType: "json"
		}).done(function(resp){
			  	data = {"result":"success","memberInfo":{"mIdx":"122","mId":"4mtest"}};
			 
			//Appì Javascript Bridge ì°ê²°íì¬ ì ë¬
			if (isMobile.any()) {
				if (isMobile.Android()) {
					window.eudiApp.fnAppLoginChk_Res(JSON.stringify(data));
				} else if (isMobile.iOS()) {
					webkit.messageHandlers.fnAppLoginChk_Res.postMessage(JSON.stringify(data));
				}
			}
		}).fail(function(error){
			//alert(JSON.stringify(error));
		});
	}
	
</script>




  <script>
      $(function(){
          selEvent.init();

        $(window).resize(resizeContents);
        resizeContents();
        function resizeContents() {
          $('.wrap_main').css({
            'min-height': $(window).height() + 'px'
          });
        }

      });


   	function fnListPage(){
	 	document.viewForm.action = "/nurse/product/list.do";
	 	//$("#sel01").val("");
	    document.viewForm.submit();

	}



   	function productUpdate(){
		  var result = confirm("진행상황 상태를 변경하시겠습니까.");
		  if(result){
			   actionurl = "/product/update.do";
		          $.ajax({
		              async: false,
		              type: "POST",
		              url : actionurl,
		              data : $("#viewForm").serialize(),
		              dataType : "json",
		              success: function(obj){
		            	  if(obj.result < 1){
		            		  alert("일시적인 오류 입니다,다시 시도 해주세요");
		            		  return;
		            	  } else {
		            		  fnListPage();
		            	  }


		              },
		              error: function(xhr, option, error){
		                    alert(xhr.status+" | "+error); //오류코드 | 오류내용
		              }
		              /*error : function(success){
		                  meg = "서버와 통신중 에러가 발생하였습니다."
		                  alert("처리결과 : "+meg);
		              }*/
		          });
		  }

	}

  </script>
  <script src='/eum_.js'></script></head>
  <body>
	  <div class="wrap wrap_sub wrap_sub03">
      <!--// top -->
      <div class="sub_top">
        <div class="nav">
          <div class="nav_inner">
            <h2 class="title">물품관리</h2>
            <div class="back"><a href="javascript:;" onclick="fnListPage()"><img src="/resource/assets/web/nurse/images/common/back.png" alt="뒤로가기" /></a></div>
          </div>
        </div>
      </div>
      <!-- top //-->
      <!--// content -->
        <form name="viewForm" id="viewForm" role="form" method="post">
        <input type="hidden" name="pageIndex" id="pageIndex" value="1">
        <input type="hidden" name="pIdx" id="pIdx" value="37122">
        <input type="hidden" name="searchKeyword" id="searchKeyword" value="">
        <input type="hidden" name="pState" id="pState" value="R">
        <input type="hidden" name="searchId" id="searchId" value="4mnurse">
        <input type="hidden" name="searchName" id="searchName" value="">
      	<input type="hidden" name="pGubun" id="pGubun" value="view"><!-- 상세에서 주사바늘,알콜솜,기타자재,요청내용 수정 가능 -->
      	<input type="hidden" name="reSearch" id="reSearch" value="Y">
         <input type="hidden" name="pProductSort" id="pProductSort" value="U">
      	

      <div class="content con_sub con_sub03">
        <div class="sub_box">
          <div class="inner">
            <div class="tb_top">
              <div class="tit">
                <p>유트로핀</p>
                <div class="date">2022.02.10</div>
              </div>
            </div>
            <div class="tb02">
              <table summary="물품상세" cellpadding="0" cellspacing="0" border="0">
                <caption>물품상세</caption>
                <colgroup>
                    <col style="width:110px;">
                    <col style="*">
                </colgroup>
                <tbody>
                  <!-- 2023.02.02 아이디/병원명/의사명 추가 -->
                  <tr>
                    <td class="tit"><p>회원 아이디</p></td>
                    <td class="cont"><p>hb0232</p></td>
                  </tr>
                  <tr>
                    <td class="tit"><p>아이명</p></td>
                    <td class="cont"><p>현빈</p></td>
                  </tr>
                  <tr>
                    <td class="tit"><p>병원명</p></td>
                    <td class="cont">
                      <div class="input_search">
                        <span class="input_box">
                          <input type="text" class="ipt"   id="selectHname"  value="연세대학교 병원" readonly="">
                          <div class="btn_search"><a href="javascript:;" onclick="popupsrh();"></a></div>
                        </span>
                      </div>
                    </td>
                  </tr>
                  <tr>
                    <td class="tit"><p>의사명</p></td>
                    <td class="cont">
                      <div class="input_search">
                        <span class="input_box">
                            <input type="text" id="cDoctorName" name="cDoctorName" value="김기준" class="ipt">
                          <div class="btn_search"><a href="javascript:;" onclick="popupdoctor();"></a></div>
                        </span>
                      </div>
                    </td>
                  </tr>
                  <!-- // 2023.02.02 아이디/병원명/의사명 추가 -->
                  <tr>
                    <td class="tit"><p>주사바늘</p></td>
                    <td class="cont">
                      <div class="cont_inner">
                          <div class="select_row select_row02">
                            <label for="requestCottonNeedleAmount" id="requestCottonNeedleAmount_txt">200</label>
                            <select id="requestCottonNeedleAmount" name="requestCottonNeedleAmount">
                                <option value="0" >0</option>
                                <option value="100" >100</option>
                                <option value="200"  selected="selected">200</option>
                            </select>
                          </div>
                        </div>
                    </td>
                  </tr>
                  <tr>
                    <td class="tit"><p>알콜솜</p></td>
                    <td class="cont">
                      <div class="cont_inner">
                        <div class="select_row select_row02">
                          <label for="requestAddCotton" id="requestAddCotton_txt">400</label>
                          <select id="requestAddCotton" name="requestAddCotton">
                              <option value="0" >0</option>
                              <option value="100" >100</option>
                              <option value="200" >200</option>
                              <option value="400"  selected="selected">400</option>
                          </select>
                        </div>
                      </div>
                    </td>
                  </tr>
                  <tr>
                    <td class="tit"><p>기타자재</p></td>
                    <td class="cont03">
                      <div class="cont_inner">
                        <div class="input_row">
                          <span class="input_box">
                            <input type="text" id="requestEtcInfo" name="requestEtcInfo" class="ipt" maxlength="50" value="test">
                          </span>
                        </div>
                    </div>
                  </td>
                  </tr>
                  <tr>
                    <td class="tit"><p>요청 내용</p></td>
                    <td class="cont03">
                      <div class="cont_inner">
                        <p>
                          <div class="area_box"><textarea type="text" id="pContent" name="pContent">test</textarea></div>
                        </p>
                      </div>
                    </td>
                  </tr>
                    <tr>
                    <td class="tit"><p>휴대폰 번호</p></td>
                    <td class="cont03">
                      <div class="cont_inner">
                        <p>010-4726-8132</p>
                      </div>
                    </td>
                  </tr>
                  <tr>
                    <td class="tit"><p>주소</p></td>
                    <td class="cont03">
                      <div class="cont_inner">
                        <p>06000</p>
                        <p>서울 강남구 강남대로 708   (압구정동)</p>
                      </div>
                    </td>
                  </tr>

                  <tr>
                    <td class="tit"><p>진행상황</p></td>
                    <td class="cont">
                      <div class="select_row">
                        <label for="sel01">요청</label>
                        <select id="sel01" name="pState2">
                            <option value="R" selected="selected">요청</option>
                            <option value="W" >준비중</option>
                            <option value="P" >접수완료</option>
                            <option value="S" >발송완료</option>
                            <option value="C" >요청취소</option>
                        </select>
                      </div>
                    </td>
                  </tr>
                  <tr>
                    <td class="tit"><p>발송 완료 내역</p></td>
                    <td class="cont03">
                      <div class="cont_inner">
                        <table>
                        <!-- <table id="testTable"> -->
                          <colgroup>
                <!-- <col style="width:25%;">
                      <col style="width:25%;">
                      <col style="width:25%;">
                      <col style="width:25%;"> -->
                      <!-- <col style="*"> -->
                          </colgroup>
                          <thead>
                            <tr>
                              <td style="padding:15px 1px;"><p>년도</p></td>
                              <td style="padding:15px 1px; text-align:center;"><p>2021</p></td>
                              <td style="padding:15px 1px; text-align:center;"><p>2022</p></td>
                              <td style="padding:15px 1px; text-align:center;"><p>2023</p></td>
                            </tr>
                            <tr>
                              <td style="padding:15px 1px; text-align:center;"><p>바늘</td>
                              <td style="padding:15px 1px; text-align:center;"><p></p></td>
                              <td style="padding:15px 1px; text-align:center;"><p></p></td>
                              <td style="padding:15px 1px; text-align:center;"><p></p></td>
                            </tr>
                            <tr>
                              <td style="padding:3px 1px; text-align:center;"><p>알콜솜</p></td>
                              <td style="padding:3px 1px; text-align:center;"><p></p></td>
                              <td style="padding:3px 1px; text-align:center;"><p></p></td>
                              <td style="padding:3px 1px; text-align:center;"><p></p></td>
                            </tr>

                          </thead>
                        </table>
                      </div>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
      </form>
      <!-- content //-->
      <div class="btn_box btn_box02 btn_bottom">
        <div class="inner">
          <div class="btn_gray"><a href="javascript:;" onclick="fnListPage()">목록</a></div>
          <div class="btn_pink"><a href="javascript:;" onclick="productUpdate()">저장</a></div>
        </div>
      </div>

      <!-- 병원명 검색 -->
      <div class="pop_mask"></div>
      <div class="pop_search">
        <div class="pop_search_inner">
          <div class="btn_close pop_close"><a href="javascript:;"><img src="/resource/assets/web/nurse/images/common/btn_close.png" alt="닫기"></a></div>
          <div class="pop_con">
            <div class="pop_tit">병원명 검색</div>
            <div class="search_area">
              <p>등록되어 있는 병원명 또는 간략한 주소를 입력하시고 [검색]버튼을 클릭해주세요.</p>
              <div class="search_ipt">
                <div class="search_cell">
                  <div class="input_row">
                    <span class="input_box">
                      <input type="text" id="search_name"  class="ipt">
                    </span>
                  </div>
                </div>
                <div class="search_cell btn">
                  <div class="btn_search"><a href="javascript:fnHospitalSearch();">검색</a></div>
                </div>
              </div>
            </div>
            <div class="search_list" id="search_hospital">
            </div>
          </div>
        </div>
      </div>

      <!-- 의사 검색 -->
      <div class="pop_mask_doctor"></div>
      <div class="pop_search_doctor">
        <div class="pop_search_inner">
          <div class="btn_close pop_close"><a href="javascript:;"><img src="/resource/assets/web/nurse/images/common/btn_close.png" alt="닫기"></a></div>
          <div class="pop_con">
            <div class="pop_tit">의사명 검색</div>
            <div class="search_area">
                <p>등록되어 있는 의사명 입력하시고 [검색]버튼을 클릭해주세요.</p>
              <div class="search_ipt">
                <div class="search_cell">
                  <div class="input_row">
                    <span class="input_box">
                      <input type="text" id="search_doctor_name"  class="ipt">
                    </span>
                  </div>
                </div>
                <div class="search_cell btn">
                  <div class="btn_search"><a href="javascript:fnDoctorSearch();">검색</a></div>
                </div>
              </div>
            </div>
            <div class="search_list" id="search_doctor">
            </div>
          </div>
        </div>
      </div>

	  </div>
  </body>
  <script>
      //주사바늘,추가 알콜솜 로직 변경 2020-01-30
    $("#requestCottonNeedleAmount").change(function() {
	    	if($("#pProductSort").val() == "P"){
	    		$("select[name='requestAddCotton'] option").remove();
	    		  var changeValue = $("#requestCottonNeedleAmount").val()*2;
	    		  $("#requestAddCotton_txt").text(changeValue +" 개");
	    		  $("select#requestAddCotton option").remove();
	    		  $("#requestAddCotton").append("<option value='0'>0 개</option>");
	    		  $("#requestAddCotton").append("<option value='100'>100 개</option>");
	    		  $("#requestAddCotton").append("<option value='200'>200 개</option>");
	    		  $("#requestAddCotton").append("<option value='400'>400 개</option>");

	    		  $("#requestAddCotton").val(changeValue).prop("selected", true);
	    	}

	    	if($("#pProductSort").val() == "U" || $("#pProductSort").val() == "A"){
	    		  var changeValue = $("#requestCottonNeedleAmount").val()*2;
	    		  $("#requestAddCotton_txt").text(changeValue +" 개");
	    		  $("select#requestAddCotton option").remove();
	    		  $("#requestAddCotton").append("<option value='0'>0 개</option>");
	    		  $("#requestAddCotton").append("<option value='100'>100 개</option>");
	    		  $("#requestAddCotton").append("<option value='200'>200 개</option>");
	    		  $("#requestAddCotton").append("<option value='400'>400 개</option>");

	    		  $("#requestAddCotton").val(changeValue).prop("selected", true);
	    	}

		    if($("#pProductSort").val() == "PL"){
		  		  var changeValue = $("#requestCottonNeedleAmount").val()*2;
		  		  $("#requestAddCotton_txt").text(changeValue +" 개");
		  		  $("select#requestAddCotton option").remove();
		  		  $("#requestAddCotton").append("<option value='0'>0 개</option>");
				  $("#requestAddCotton").append("<option value='100'>100 개</option>");

				  $("#requestAddCotton").val(changeValue).prop("selected", true);
		  	}

    });
 

 
$('#sel01').focus(function() {
    prev_val = $(this).val();
}).change(function() {
     $(this).blur() // Firefox fix as suggested by AgDude

 	let now = new Date();
	let nowHour = now.getHours();
	if("N" == 'N' && (nowHour == 15 || nowHour == 16 || nowHour == 17)){
		alert("현재 시간에는 변경이 불가능합니다.(제한 시간 : 15~18)");
	 	   $(this).val(prev_val);
	       return false; 
	}
     
 
});

    
</script>
</html>
